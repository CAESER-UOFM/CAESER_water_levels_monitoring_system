(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{6395:function(e,a,t){Promise.resolve().then(t.bind(t,9371))},9371:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var s=t(7437),l=t(2265),r=t(9376),n=t(7625),i=t(1156),d=t(6940),c=t(7059),o=t(2994),m=t(8147),x=t(2190),h=t(4061),u=t(2553),g=t(3446),p=t(6583);function j(e){let{data:a,config:t,loading:r=!1}=e,[j,v]=(0,l.useState)(null),[y,f]=(0,l.useState)(!0),N=(0,l.useMemo)(()=>a.filter(e=>{if(!t.dateRange.start||!t.dateRange.end)return!0;let a=new Date(e.timestamp_utc);return a>=t.dateRange.start&&a<=t.dateRange.end}).map(e=>({timestamp:e.timestamp_utc,date:new Date(e.timestamp_utc),water_level:e.water_level,temperature:e.temperature,dtw:e.dtw,source:e.data_source,original_timestamp:e.timestamp_utc})).sort((e,a)=>e.date.getTime()-a.date.getTime()),[a,t.dateRange]),b=(0,l.useMemo)(()=>N.filter(e=>"manual"===e.source),[N]);(0,l.useMemo)(()=>N.filter(e=>"manual"!==e.source),[N]);let w=(0,l.useMemo)(()=>{var e,a;if((null===(e=t.yAxisRange)||void 0===e?void 0:e.min)!==void 0&&(null===(a=t.yAxisRange)||void 0===a?void 0:a.max)!==void 0)return[t.yAxisRange.min,t.yAxisRange.max];let s=N.map(e=>e.water_level).filter(e=>null!=e);if(0===s.length)return["auto","auto"];let l=Math.min(...s),r=Math.max(...s),n=(r-l)*.1;return[l-n,r+n]},[N,t.yAxisRange]),k=(0,l.useCallback)(e=>{var a,t;let{active:l,payload:r,label:n}=e;if(!l||!r||!r.length)return null;let i=new Date(n),d=(null===(t=r[0])||void 0===t?void 0:null===(a=t.payload)||void 0===a?void 0:a.source)==="manual";return(0,s.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 mb-2",children:i.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),r.map((e,a)=>{var t;return(0,s.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:"water_level"===e.dataKey?d?"Manual Reading":"Water Level":"temperature"===e.dataKey?"Temperature":e.dataKey})]}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[null===(t=e.value)||void 0===t?void 0:t.toFixed(3)," ","temperature"===e.dataKey?"\xb0C":"ft"]})]},a)}),d&&(0,s.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Manual measurement"})})]})},[]),C=(0,l.useCallback)(e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:N.length>100?"2-digit":void 0}),[N.length]),L=(0,l.useCallback)(e=>{if(e&&void 0!==e.startIndex&&void 0!==e.endIndex){let a=e.startIndex,t=e.endIndex;v(N.slice(a,t+1))}else v(null)},[N]),D=j||N;return r?(0,s.jsx)("div",{className:"h-96 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 loading-spinner mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Loading chart..."})]})}):0===N.length?(0,s.jsx)("div",{className:"h-96 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data to Display"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Adjust your filters or date range to view data."})]})}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[D.length," points displayed"]}),j&&(0,s.jsx)("button",{onClick:()=>v(null),className:"text-sm text-primary-600 hover:text-primary-800",children:"Reset Zoom"})]}),(0,s.jsxs)("button",{onClick:()=>f(!y),className:"text-sm text-gray-600 hover:text-gray-800",children:[y?"Hide":"Show"," Navigation"]})]}),(0,s.jsx)("div",{className:"h-96 w-full",children:(0,s.jsx)(n.h,{width:"100%",height:"100%",children:(0,s.jsxs)(i.w,{data:D,margin:{top:5,right:30,left:20,bottom:5},children:[(0,s.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,s.jsx)(c.K,{dataKey:"timestamp",tickFormatter:C,stroke:"#6b7280",fontSize:12,angle:-45,textAnchor:"end",height:60,interval:"preserveStartEnd"}),(0,s.jsx)(o.B,{domain:w,stroke:"#6b7280",fontSize:12,label:{value:"Water Level (ft)",angle:-90,position:"insideLeft",style:{textAnchor:"middle"}}}),(0,s.jsx)(m.u,{content:(0,s.jsx)(k,{})}),(0,s.jsx)(x.D,{}),t.showWaterLevel&&(0,s.jsx)(h.x,{type:"monotone",dataKey:"water_level",stroke:t.colors.waterLevel,strokeWidth:2,dot:!1,activeDot:{r:4,stroke:t.colors.waterLevel,strokeWidth:2},name:"Water Level",connectNulls:!1}),t.showTemperature&&(0,s.jsx)(h.x,{type:"monotone",dataKey:"temperature",stroke:t.colors.temperature,strokeWidth:2,dot:!1,activeDot:{r:4,stroke:t.colors.temperature,strokeWidth:2},name:"Temperature",yAxisId:"temp",connectNulls:!1}),y&&N.length>50&&(0,s.jsx)(u.B,{dataKey:"timestamp",height:30,stroke:t.colors.waterLevel,onChange:L,tickFormatter:C})]})})}),t.showManualReadings&&b.length>0&&(0,s.jsx)("div",{className:"h-96 w-full -mt-96 relative pointer-events-none",children:(0,s.jsx)(n.h,{width:"100%",height:"100%",children:(0,s.jsxs)(g.G,{data:b,margin:{top:5,right:30,left:20,bottom:5},children:[(0,s.jsx)(c.K,{dataKey:"timestamp",type:"category",scale:"time",domain:["dataMin","dataMax"],hide:!0}),(0,s.jsx)(o.B,{domain:w,hide:!0}),(0,s.jsx)(p.b,{dataKey:"water_level",fill:t.colors.manual,stroke:t.colors.manual,strokeWidth:2,r:5,shape:"circle",name:"Manual Readings"})]})})}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-4 text-sm",children:[t.showWaterLevel&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-0.5",style:{backgroundColor:t.colors.waterLevel}}),(0,s.jsx)("span",{className:"text-gray-700",children:"Water Level"})]}),t.showTemperature&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-0.5",style:{backgroundColor:t.colors.temperature}}),(0,s.jsx)("span",{className:"text-gray-700",children:"Temperature"})]}),t.showManualReadings&&b.length>0&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:t.colors.manual}}),(0,s.jsxs)("span",{className:"text-gray-700",children:["Manual Readings (",b.length,")"]})]})]}),N.length>0&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["Data range: ",N[0].date.toLocaleDateString()," to"," ",N[N.length-1].date.toLocaleDateString(),j&&(0,s.jsx)("span",{className:"ml-2 text-primary-600",children:"(Zoomed view)"})]})]})}function v(e){let{config:a,onConfigChange:t,onDateRangeChange:r,well:n,dataCount:i}=e,[d,c]=(0,l.useState)(!1),[o,m]=(0,l.useState)({start:"",end:""}),x=(0,l.useCallback)(e=>{if(null===e)r(void 0,void 0);else{let a=new Date,t=new Date;t.setDate(t.getDate()-e),r(t,a)}},[r]),h=(0,l.useCallback)(()=>{if(o.start&&o.end){let e=new Date(o.start),a=new Date(o.end);e<=a?r(e,a):alert("Start date must be before end date")}},[o,r]),u=(0,l.useCallback)(e=>{switch(e){case"waterLevel":t({showWaterLevel:!a.showWaterLevel});break;case"temperature":t({showTemperature:!a.showTemperature});break;case"manual":t({showManualReadings:!a.showManualReadings})}},[a,t]);return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Chart Controls"}),(0,s.jsx)("button",{onClick:()=>c(!d),className:"p-2 text-gray-500 hover:text-gray-700 transition-colors mobile-touch-target md:hidden",children:(0,s.jsx)("svg",{className:"w-5 h-5 transform transition-transform ".concat(d?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,s.jsxs)("div",{className:"space-y-6 ".concat(d?"block":"hidden md:block"),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Data Types"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.showWaterLevel,onChange:()=>u("waterLevel"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Water Level"}),(0,s.jsx)("div",{className:"w-4 h-2 rounded",style:{backgroundColor:a.colors.waterLevel}})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.showTemperature,onChange:()=>u("temperature"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Temperature"}),(0,s.jsx)("div",{className:"w-4 h-2 rounded",style:{backgroundColor:a.colors.temperature}})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.showManualReadings,onChange:()=>u("manual"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Manual Readings"}),(0,s.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a.colors.manual}})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Date Range"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2",children:[{label:"Last 30 Days",days:30},{label:"Last 3 Months",days:90},{label:"Last 6 Months",days:180},{label:"Last Year",days:365},{label:"All Data",days:null}].map((e,a)=>(0,s.jsx)("button",{onClick:()=>x(e.days),className:"btn-outline text-sm py-2 px-3",children:e.label},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Custom Date Range"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:o.start,onChange:e=>m(a=>({...a,start:e.target.value})),className:"input-field text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"End Date"}),(0,s.jsx)("input",{type:"date",value:o.end,onChange:e=>m(a=>({...a,end:e.target.value})),className:"input-field text-sm"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{onClick:h,disabled:!o.start||!o.end,className:"btn-primary text-sm w-full mobile-touch-target disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply Range"})})]})]}),a.dateRange.start&&a.dateRange.end&&(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Current Range:"})]}),(0,s.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:[a.dateRange.start.toLocaleDateString()," to ",a.dateRange.end.toLocaleDateString()]})]}),(0,s.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Total Points:"}),(0,s.jsx)("p",{className:"text-gray-900",children:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Well Number:"}),(0,s.jsx)("p",{className:"text-gray-900",children:n.well_number})]}),n.cae_number&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"CAE:"}),(0,s.jsx)("p",{className:"text-gray-900",children:n.cae_number})]}),n.well_field&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Field:"}),(0,s.jsx)("p",{className:"text-gray-900",children:n.well_field})]})]})}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"text-xs text-yellow-700",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Chart Tips:"}),(0,s.jsxs)("ul",{className:"space-y-1",children:[(0,s.jsx)("li",{children:"• Touch and drag to pan the chart"}),(0,s.jsx)("li",{children:"• Pinch to zoom on mobile devices"}),(0,s.jsx)("li",{children:"• Tap data points for detailed information"}),(0,s.jsx)("li",{children:"• Use the brush below the chart to navigate large datasets"})]})]})]})})]})]})}var y=t(336),f=t(880),N=t(2911);function b(){let e=(0,r.useParams)(),a=(0,r.useRouter)(),t=e.id,n=e.wellNumber,[i,d]=(0,l.useState)(null),[c,o]=(0,l.useState)([]),[m,x]=(0,l.useState)(!0),[h,u]=(0,l.useState)(null),[g,p]=(0,l.useState)(!1),[b,w]=(0,l.useState)({showWaterLevel:!0,showTemperature:!1,showManualReadings:!0,dateRange:{},colors:{waterLevel:"#3b82f6",temperature:"#ef4444",manual:"#10b981"}});(0,l.useEffect)(()=>{(async()=>{try{x(!0),u(null);let e=f.f4.getDatabase(t);if(!e)throw Error("Database not available");let a=await e.getWell(n);if(!a)throw Error("Well not found");d(a);let s=await e.getWaterLevelData({wellNumber:n,dataType:"all",downsample:!0,maxPoints:2e3});if(o(s),s.length>0){let e=s.map(e=>new Date(e.timestamp_utc)),a=new Date(Math.min(...e.map(e=>e.getTime()))),t=new Date(Math.max(...e.map(e=>e.getTime())));w(e=>({...e,dateRange:{start:a,end:t}}))}}catch(e){console.error("Error loading well data:",e),u(e instanceof Error?e.message:"Failed to load well data")}finally{x(!1)}})()},[t,n]),(0,l.useEffect)(()=>{let e=e=>{g&&!e.target.closest(".relative")&&p(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[g]);let k=(0,l.useCallback)(e=>{w(a=>({...a,...e}))},[]),C=(0,l.useCallback)(async(e,a)=>{try{x(!0);let s=f.f4.getDatabase(t);if(!s)return;let l=await s.getWaterLevelData({wellNumber:n,startDate:null==e?void 0:e.toISOString(),endDate:null==a?void 0:a.toISOString(),dataType:"all",downsample:!0,maxPoints:2e3});o(l),w(t=>({...t,dateRange:{start:e,end:a}}))}catch(e){console.error("Error loading filtered data:",e)}finally{x(!1)}},[t,n]),L=(0,l.useCallback)(()=>{a.push("/wells/".concat(t))},[t,a]),D=(0,l.useCallback)(()=>{p(e=>!e)},[]),_=(0,l.useCallback)(async()=>{if(i&&0!==c.length)try{var e,a,t,s;let l=(0,N.cv)(c,null===(a=b.dateRange)||void 0===a?void 0:null===(e=a.start)||void 0===e?void 0:e.toISOString(),null===(s=b.dateRange)||void 0===s?void 0:null===(t=s.end)||void 0===t?void 0:t.toISOString());(0,N.h)(l,i),p(!1)}catch(e){console.error("Error exporting CSV:",e),alert("Failed to export CSV file. Please try again.")}},[i,c,b.dateRange]),S=(0,l.useCallback)(async()=>{if(i&&0!==c.length)try{var e,a,t,s;let l=(0,N.cv)(c,null===(a=b.dateRange)||void 0===a?void 0:null===(e=a.start)||void 0===e?void 0:e.toISOString(),null===(s=b.dateRange)||void 0===s?void 0:null===(t=s.end)||void 0===t?void 0:t.toISOString());(0,N.Sz)(l,i),p(!1)}catch(e){console.error("Error exporting JSON:",e),alert("Failed to export JSON file. Please try again.")}},[i,c,b.dateRange]),R=(0,l.useCallback)(()=>{a.push("/wells/".concat(t,"/recharge/").concat(n))},[t,n,a]);return m&&!i?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(y.T,{size:"large"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading well data..."})]})}):h?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,s.jsx)("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Data"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:h}),(0,s.jsxs)("div",{className:"space-x-3",children:[(0,s.jsx)("button",{onClick:L,className:"btn-secondary",children:"← Back to Wells"}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Try Again"})]})]})}):i?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("button",{onClick:L,className:"p-2 text-gray-600 hover:text-gray-900 transition-colors mobile-touch-target",title:"Back to wells",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-xl font-semibold text-gray-900",children:["Well ",i.well_number]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[i.cae_number&&(0,s.jsxs)("span",{children:["CAE: ",i.cae_number]}),i.well_field&&(0,s.jsxs)("span",{children:["Field: ",i.well_field]}),(0,s.jsxs)("span",{children:[c.length," readings"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:R,className:"btn-outline text-sm px-3 py-2",title:"View recharge calculations",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Recharge"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:D,className:"btn-primary text-sm px-3 py-2",title:"Export data",disabled:0===c.length,children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Export"}),(0,s.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-20",children:(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsxs)("button",{onClick:_,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCA"}),"Export as CSV"]}),(0,s.jsxs)("button",{onClick:S,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCB"}),"Export as JSON"]}),(0,s.jsx)("div",{className:"border-t border-gray-100 my-1"}),(0,s.jsxs)("div",{className:"px-4 py-2 text-xs text-gray-500",children:["Exports current date range: ",c.length," readings"]})]})})]})]})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[(0,s.jsx)(v,{config:b,onConfigChange:k,onDateRangeChange:C,well:i,dataCount:c.length}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Water Level Data"}),m&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)(y.T,{size:"small"}),(0,s.jsx)("span",{children:"Updating..."})]})]}),0===c.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),(0,s.jsx)("p",{className:"text-gray-600",children:"No water level readings found for the selected date range."})]}):(0,s.jsx)(j,{data:c,config:b,loading:m})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Well Information"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Well Number:"}),(0,s.jsx)("p",{className:"text-gray-900",children:i.well_number})]}),i.cae_number&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"CAE Number:"}),(0,s.jsx)("p",{className:"text-gray-900",children:i.cae_number})]}),i.well_field&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Well Field:"}),(0,s.jsx)("p",{className:"text-gray-900",children:i.well_field})]}),i.aquifer_type&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Aquifer Type:"}),(0,s.jsx)("p",{className:"text-gray-900 capitalize",children:i.aquifer_type})]}),i.top_of_casing&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Top of Casing:"}),(0,s.jsxs)("p",{className:"text-gray-900",children:[i.top_of_casing.toFixed(2)," ft"]})]}),i.well_depth&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Well Depth:"}),(0,s.jsxs)("p",{className:"text-gray-900",children:[i.well_depth.toFixed(2)," ft"]})]})]}),i.notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Notes:"}),(0,s.jsx)("p",{className:"text-gray-900 text-sm mt-1",children:i.notes})]})]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Summary"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Total Readings:"}),(0,s.jsx)("span",{className:"text-gray-900",children:i.total_readings||0})]}),i.last_reading_date&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Last Reading:"}),(0,s.jsx)("span",{className:"text-gray-900",children:new Date(i.last_reading_date).toLocaleDateString()})]}),(0,s.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[i.has_transducer_data&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Transducer Data"}),i.has_manual_readings&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Manual Readings"}),i.has_telemetry_data&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Telemetry Data"})]})})]})]})]})]})]}):null}}},function(e){e.O(0,[218,17,856,957,971,117,744],function(){return e(e.s=6395)}),_N_E=e.O()}]);