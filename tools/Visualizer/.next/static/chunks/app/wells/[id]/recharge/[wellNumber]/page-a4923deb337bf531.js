(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{1516:function(e,t,a){Promise.resolve().then(a.bind(a,8347))},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},8347:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(7437),l=a(2265),r=a(9376),c=a(336),n=a(880),i=a(2911);function d(){let e=(0,r.useParams)(),t=(0,r.useRouter)(),a=e.id,d=e.wellNumber,[o,x]=(0,l.useState)(null),[m,h]=(0,l.useState)([]),[u,p]=(0,l.useState)(!0),[g,j]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{p(!0),j(null);let e=n.f4.getDatabase(a);if(!e)throw Error("Database not available");let t=await e.getWell(d);if(!t)throw Error("Well not found");x(t);let s=await e.getRechargeResults(d);h(s)}catch(e){console.error("Error loading recharge data:",e),j(e instanceof Error?e.message:"Failed to load recharge data")}finally{p(!1)}})()},[a,d]);let y=(0,l.useCallback)(()=>{t.push("/wells/".concat(a,"/plot/").concat(d))},[a,d,t]),N=(0,l.useCallback)(()=>{t.push("/wells/".concat(a))},[a,t]),f=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mm";return null==e?"—":"".concat(e.toFixed(2)," ").concat(t)},v=(0,l.useCallback)(async()=>{if(o&&0!==m.length)try{(0,i.OV)(m,o)}catch(e){console.error("Error exporting CSV:",e),alert("Failed to export CSV file. Please try again.")}},[o,m]),w=(0,l.useCallback)(async()=>{if(o&&0!==m.length)try{(0,i.Kj)(m,o)}catch(e){console.error("Error exporting JSON:",e),alert("Failed to export JSON file. Please try again.")}},[o,m]),k=(0,l.useCallback)(async()=>{if(o&&0!==m.length)try{(0,i._W)(m,o)}catch(e){console.error("Error exporting PDF:",e),alert("Failed to export PDF report. Please try again.")}},[o,m]);return u?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.T,{size:"large"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading recharge results..."})]})}):g?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,s.jsx)("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Results"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:g}),(0,s.jsxs)("div",{className:"space-x-3",children:[(0,s.jsx)("button",{onClick:N,className:"btn-secondary",children:"← Back to Wells"}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Try Again"})]})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("button",{onClick:y,className:"p-2 text-gray-600 hover:text-gray-900 transition-colors mobile-touch-target",title:"Back to plot",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-xl font-semibold text-gray-900",children:["Recharge Results - Well ",null==o?void 0:o.well_number]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(null==o?void 0:o.cae_number)&&(0,s.jsxs)("span",{children:["CAE: ",o.cae_number]}),(null==o?void 0:o.well_field)&&(0,s.jsxs)("span",{children:["Field: ",o.well_field]}),(0,s.jsxs)("span",{children:[m.length," calculation",1!==m.length?"s":""]})]})]})]}),(0,s.jsx)("button",{onClick:y,className:"btn-outline text-sm px-3 py-2",children:"View Plot"})]})})}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-6",children:0===m.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Recharge Results Available"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"No recharge calculations have been performed for this well."}),(0,s.jsx)("button",{onClick:y,className:"btn-primary",children:"View Water Level Data"})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recharge Calculation Summary"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["RISE","MRC","EMR"].map(e=>{let t=m.filter(t=>t.method===e),a=t.sort((e,t)=>new Date(t.calculation_date).getTime()-new Date(e.calculation_date).getTime())[0];return(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"font-medium text-gray-900 mb-2",children:[e," Method"]}),a?(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Latest:"}),(0,s.jsx)("span",{className:"font-medium",children:f(a.calculation_date)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Recharge:"}),(0,s.jsx)("span",{className:"font-medium text-primary-600",children:b(a.recharge_mm)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Calculations:"}),(0,s.jsx)("span",{className:"font-medium",children:t.length})]})]}):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No calculations"})]},e)})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"All Recharge Calculations"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Calculation Date"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recharge (mm)"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recharge (in)"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specific Yield"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.sort((e,t)=>new Date(t.calculation_date).getTime()-new Date(e.calculation_date).getTime()).map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("RISE"===e.method?"bg-blue-100 text-blue-800":"MRC"===e.method?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"),children:e.method})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:f(e.calculation_date)}),(0,s.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:[f(e.start_date)," - ",f(e.end_date)]}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:b(e.recharge_mm)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:b(e.recharge_inches,"in")}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:e.specific_yield?e.specific_yield.toFixed(3):"—"})]},t))})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"RISE Method"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Recharge Investigation and Simulation Tool - automated water table fluctuation method."}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,s.jsx)("p",{children:"• Automated calculation"}),(0,s.jsx)("p",{children:"• Statistical analysis"}),(0,s.jsx)("p",{children:"• Quality control filters"})]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"MRC Method"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Manual Recharge Calculation - user-defined parameters and periods."}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,s.jsx)("p",{children:"• Manual parameter selection"}),(0,s.jsx)("p",{children:"• Custom time periods"}),(0,s.jsx)("p",{children:"• User-defined specific yield"})]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"EMR Method"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Enhanced Manual Recharge - advanced manual calculation with additional parameters."}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,s.jsx)("p",{children:"• Enhanced parameter control"}),(0,s.jsx)("p",{children:"• Advanced filtering options"}),(0,s.jsx)("p",{children:"• Detailed quality assessment"})]})]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Export Results"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Download recharge calculation results for further analysis."}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)("button",{className:"btn-outline",onClick:v,disabled:0===m.length,children:"\uD83D\uDCCA Export CSV"}),(0,s.jsx)("button",{className:"btn-outline",onClick:w,disabled:0===m.length,children:"\uD83D\uDCCB Export JSON"}),(0,s.jsx)("button",{className:"btn-outline",onClick:k,disabled:0===m.length,children:"\uD83D\uDCC4 Export Report"})]})]})]})})]})}}},function(e){e.O(0,[218,17,957,971,117,744],function(){return e(e.s=1516)}),_N_E=e.O()}]);